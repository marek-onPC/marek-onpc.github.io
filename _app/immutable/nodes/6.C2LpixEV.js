import{n as F,i as Ne,s as Ce,e as Oe,c as ne,o as Be,k as ye,l as we,h as se,r as Ee}from"../chunks/scheduler.hyw8iwdn.js";import{G as Ie,H as Le,I as De,J as Pe,S as Te,i as Se,e as v,t as ee,s as T,c as C,a as A,b as te,d as k,f as S,l as d,g as L,h,q,j as Ue,k as G,m as K,n as ce,K as $e,r as ae,u as ie,v as oe,w as re,o as ue,x as Y,p as Q,z as W}from"../chunks/index.C4qMneLH.js";import{e as fe,u as Ae,f as qe}from"../chunks/each.Kmx-qJao.js";import{p as Me}from"../chunks/stores.LgX8u4WC.js";import{e as Re,h as Ve,L as Je,s as ze,i as je,c as Ge}from"../chunks/fetchClient.radSaUxS.js";import{M as We}from"../chunks/Modal.ClTiq9Fi.js";import{g as Fe}from"../chunks/entry.cdUFzJKg.js";import{c as He}from"../chunks/index.CvmYViMX.js";function Ke(n,e,t,l){if(!e)return F;const a=n.getBoundingClientRect();if(e.left===a.left&&e.right===a.right&&e.top===a.top&&e.bottom===a.bottom)return F;const{delay:i=0,duration:s=300,easing:r=Ne,start:c=Ie()+i,end:b=c+s,tick:o=F,css:f}=t(n,{from:e,to:a},l);let E=!0,w=!1,y;function O(){f&&(y=De(n,0,1,s,i,r,f)),i||(w=!0)}function D(){f&&Pe(n,y),E=!1}return Le(g=>{if(!w&&g>=c&&(w=!0),w&&g>=b&&(o(1,0),D()),!E)return!1;if(w){const P=g-c,U=0+1*r(P/s);o(U,1-U)}return!0}),O(),o(0,1),D}function Xe(n){const e=getComputedStyle(n);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:t,height:l}=e,a=n.getBoundingClientRect();n.style.position="absolute",n.style.width=t,n.style.height=l,Qe(n,a)}}function Qe(n,e){const t=n.getBoundingClientRect();if(e.left!==t.left||e.top!==t.top){const l=getComputedStyle(n),a=l.transform==="none"?"":l.transform;n.style.transform=`${a} translate(${e.left-t.left}px, ${e.top-t.top}px)`}}function Ye(n){let e,t,l,a,i,s,r,c,b;return{c(){e=v("label"),t=v("p"),l=ee(n[1]),a=T(),i=v("input"),s=T(),r=v("span"),this.h()},l(o){e=C(o,"LABEL",{class:!0});var f=A(e);t=C(f,"P",{class:!0});var E=A(t);l=te(E,n[1]),E.forEach(k),a=S(f),i=C(f,"INPUT",{type:!0,class:!0}),s=S(f),r=C(f,"SPAN",{class:!0}),A(r).forEach(k),f.forEach(k),this.h()},h(){d(t,"class","svelte-1n5ydc0"),d(i,"type","checkbox"),d(i,"class","svelte-1n5ydc0"),d(r,"class","checkmark svelte-1n5ydc0"),d(e,"class","checkbox")},m(o,f){L(o,e,f),h(e,t),h(t,l),h(e,a),h(e,i),i.checked=n[0],h(e,s),h(e,r),c||(b=q(i,"change",n[2]),c=!0)},p(o,[f]){f&2&&Ue(l,o[1]),f&1&&(i.checked=o[0])},i:F,o:F,d(o){o&&k(e),c=!1,b()}}}function Ze(n,e,t){let{isChecked:l}=e,{title:a}=e;function i(){l=this.checked,t(0,l)}return n.$$set=s=>{"isChecked"in s&&t(0,l=s.isChecked),"title"in s&&t(1,a=s.title)},[l,a,i]}class xe extends Te{constructor(e){super(),Se(this,e,Ze,Ye,Ce,{isChecked:0,title:1})}}const _e=(n,e,t)=>{if(n.length<2)throw new Error("array should have minimum 2 elements");if(e<0||e>n.length)throw new Error("'from' index is out of scope");if(t<0||t>n.length)throw new Error("'to' index is out of scope");if(e===t)throw new Error("'from' and 'to' are equal");const l=[...n];return l.splice(t,0,l.splice(e,1)[0]),l};function et(n,{from:e,to:t},l={}){const a=getComputedStyle(n),i=a.transform==="none"?"":a.transform,[s,r]=a.transformOrigin.split(" ").map(parseFloat),c=e.left+e.width*s/t.width-(t.left+s),b=e.top+e.height*r/t.height-(t.top+r),{delay:o=0,duration:f=w=>Math.sqrt(w)*120,easing:E=He}=l;return{delay:o,duration:Oe(f)?f(Math.sqrt(c*c+b*b)):f,easing:E,css:(w,y)=>{const O=y*c,D=y*b,g=w+y*e.width/t.width,P=w+y*e.height/t.height;return`transform: ${i} translate(${O}px, ${D}px) scale(${g}, ${P});`}}}function de(n,e,t){const l=n.slice();return l[23]=e[t],l[24]=e,l[25]=t,l}function pe(n){let e,t,l;function a(s){n[9](s)}let i={text:`Would you like to delete ${n[3].title} cheat sheet?`,callback:n[6]};return n[0]!==void 0&&(i.isOpened=n[0]),e=new We({props:i}),ye.push(()=>$e(e,"isOpened",a)),{c(){ae(e.$$.fragment)},l(s){ie(e.$$.fragment,s)},m(s,r){oe(e,s,r),l=!0},p(s,r){const c={};r&8&&(c.text=`Would you like to delete ${s[3].title} cheat sheet?`),!t&&r&1&&(t=!0,c.isOpened=s[0],we(()=>t=!1)),e.$set(c)},i(s){l||(G(e.$$.fragment,s),l=!0)},o(s){K(e.$$.fragment,s),l=!1},d(s){re(e,s)}}}function tt(n){let e,t;return e=new Je({}),{c(){ae(e.$$.fragment)},l(l){ie(e.$$.fragment,l)},m(l,a){oe(e,l,a),t=!0},p:F,i(l){t||(G(e.$$.fragment,l),t=!0)},o(l){K(e.$$.fragment,l),t=!1},d(l){re(e,l)}}}function lt(n){let e,t,l,a,i,s="title",r,c,b,o,f,E="language",w,y,O,D,g,P,U,M,N,B,J="+",z,j=JSON.stringify(n[2])!==JSON.stringify(n[3]),p,I,R,X;function Z(_){n[12](_)}let le={title:"Publish"};n[3].is_published!==void 0&&(le.isChecked=n[3].is_published),y=new xe({props:le}),ye.push(()=>$e(y,"isChecked",Z));let $=n[3].cards&&he(n),m=j&&ve(n);return{c(){e=v("div"),t=v("div"),l=v("input"),a=T(),i=v("label"),i.textContent=s,r=T(),c=v("div"),b=v("input"),o=T(),f=v("label"),f.textContent=E,w=T(),ae(y.$$.fragment),D=T(),g=v("button"),P=ee("♻"),M=T(),$&&$.c(),N=T(),B=v("button"),B.textContent=J,z=T(),m&&m.c(),p=Y(),this.h()},l(_){e=C(_,"DIV",{class:!0});var u=A(e);t=C(u,"DIV",{class:!0});var V=A(t);l=C(V,"INPUT",{name:!0,type:!0,class:!0}),a=S(V),i=C(V,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Q(i)!=="svelte-153g75m"&&(i.textContent=s),V.forEach(k),r=S(u),c=C(u,"DIV",{class:!0});var H=A(c);b=C(H,"INPUT",{name:!0,type:!0,class:!0}),o=S(H),f=C(H,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Q(f)!=="svelte-68okq"&&(f.textContent=E),H.forEach(k),w=S(u),ie(y.$$.fragment,u),D=S(u),g=C(u,"BUTTON",{class:!0});var x=A(g);P=te(x,"♻"),x.forEach(k),u.forEach(k),M=S(_),$&&$.l(_),N=S(_),B=C(_,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(B)!=="svelte-1aajpiv"&&(B.textContent=J),z=S(_),m&&m.l(_),p=Y(),this.h()},h(){d(l,"name","title"),d(l,"type","text"),d(l,"class","update__title svelte-1p1c7e6"),d(i,"for","title"),d(i,"class","svelte-1p1c7e6"),d(t,"class","update__title-wrapper svelte-1p1c7e6"),d(b,"name","language"),d(b,"type","text"),d(b,"class","update__language svelte-1p1c7e6"),d(f,"for","language"),d(f,"class","svelte-1p1c7e6"),d(c,"class","update__language-wrapper svelte-1p1c7e6"),d(g,"class",U=se(`button update__delete ${n[4]?"--safari":""}`)+" svelte-1p1c7e6"),d(e,"class","update__header svelte-1p1c7e6"),d(B,"class","button update__add svelte-1p1c7e6")},m(_,u){L(_,e,u),h(e,t),h(t,l),W(l,n[3].title),h(t,a),h(t,i),h(e,r),h(e,c),h(c,b),W(b,n[3].language),h(c,o),h(c,f),h(e,w),oe(y,e,null),h(e,D),h(e,g),h(g,P),L(_,M,u),$&&$.m(_,u),L(_,N,u),L(_,B,u),L(_,z,u),m&&m.m(_,u),L(_,p,u),I=!0,R||(X=[q(l,"input",n[10]),q(b,"input",n[11]),q(g,"click",n[13]),q(B,"click",n[7])],R=!0)},p(_,u){u&8&&l.value!==_[3].title&&W(l,_[3].title),u&8&&b.value!==_[3].language&&W(b,_[3].language);const V={};!O&&u&8&&(O=!0,V.isChecked=_[3].is_published,we(()=>O=!1)),y.$set(V),(!I||u&16&&U!==(U=se(`button update__delete ${_[4]?"--safari":""}`)+" svelte-1p1c7e6"))&&d(g,"class",U),_[3].cards?$?$.p(_,u):($=he(_),$.c(),$.m(N.parentNode,N)):$&&($.d(1),$=null),u&12&&(j=JSON.stringify(_[2])!==JSON.stringify(_[3])),j?m?m.p(_,u):(m=ve(_),m.c(),m.m(p.parentNode,p)):m&&(m.d(1),m=null)},i(_){I||(G(y.$$.fragment,_),I=!0)},o(_){K(y.$$.fragment,_),I=!1},d(_){_&&(k(e),k(M),k(N),k(B),k(z),k(p)),re(y),$&&$.d(_),m&&m.d(_),R=!1,Ee(X)}}}function he(n){let e=[],t=new Map,l,a=fe(n[3].cards);const i=s=>s[23];for(let s=0;s<a.length;s+=1){let r=de(n,a,s),c=i(r);t.set(c,e[s]=ke(c,r))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();l=Y()},l(s){for(let r=0;r<e.length;r+=1)e[r].l(s);l=Y()},m(s,r){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(s,r);L(s,l,r)},p(s,r){if(r&280){a=fe(s[3].cards);for(let c=0;c<e.length;c+=1)e[c].r();e=Ae(e,r,i,1,s,a,t,l.parentNode,qe,ke,l,de);for(let c=0;c<e.length;c+=1)e[c].a()}},d(s){s&&k(l);for(let r=0;r<e.length;r+=1)e[r].d(s)}}}function me(n){let e,t,l=n[25]>0&&be(n),a=n[25]<n[3].cards.length-1&&ge(n);return{c(){l&&l.c(),e=T(),a&&a.c(),t=Y()},l(i){l&&l.l(i),e=S(i),a&&a.l(i),t=Y()},m(i,s){l&&l.m(i,s),L(i,e,s),a&&a.m(i,s),L(i,t,s)},p(i,s){i[25]>0?l?l.p(i,s):(l=be(i),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null),i[25]<i[3].cards.length-1?a?a.p(i,s):(a=ge(i),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null)},d(i){i&&(k(e),k(t)),l&&l.d(i),a&&a.d(i)}}}function be(n){let e,t="▲",l,a;function i(){return n[17](n[25])}return{c(){e=v("button"),e.textContent=t,this.h()},l(s){e=C(s,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-392haw"&&(e.textContent=t),this.h()},h(){d(e,"class","update__move-up-card arrow-up svelte-1p1c7e6")},m(s,r){L(s,e,r),l||(a=q(e,"click",i),l=!0)},p(s,r){n=s},d(s){s&&k(e),l=!1,a()}}}function ge(n){let e,t="▼",l,a;function i(){return n[18](n[25])}return{c(){e=v("button"),e.textContent=t,this.h()},l(s){e=C(s,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-ro4z82"&&(e.textContent=t),this.h()},h(){d(e,"class","update__move-down-card svelte-1p1c7e6")},m(s,r){L(s,e,r),l||(a=q(e,"click",i),l=!0)},p(s,r){n=s},d(s){s&&k(e),l=!1,a()}}}function ke(n,e){let t,l,a,i,s,r,c,b,o,f,E,w,y,O,D,g,P,U,M,N,B,J,z,j,p,I=F,R,X;function Z(){e[14].call(l,e[24],e[25])}function le(){return e[15](e[25])}function $(){e[16].call(g,e[24],e[25])}let m=e[3].cards&&me(e);return{key:n,first:null,c(){t=v("div"),l=v("input"),s=T(),r=v("label"),c=ee("subtitle"),o=T(),f=v("button"),E=ee("♻"),y=T(),O=v("div"),D=T(),g=v("textarea"),M=T(),N=v("label"),B=ee("cheat-sheet content"),z=T(),m&&m.c(),j=T(),this.h()},l(_){t=C(_,"DIV",{class:!0});var u=A(t);l=C(u,"INPUT",{class:!0,name:!0,id:!0}),s=S(u),r=C(u,"LABEL",{for:!0,class:!0});var V=A(r);c=te(V,"subtitle"),V.forEach(k),o=S(u),f=C(u,"BUTTON",{class:!0});var H=A(f);E=te(H,"♻"),H.forEach(k),y=S(u),O=C(u,"DIV",{class:!0}),A(O).forEach(k),D=S(u),g=C(u,"TEXTAREA",{class:!0,name:!0,id:!0}),A(g).forEach(k),M=S(u),N=C(u,"LABEL",{class:!0,for:!0});var x=A(N);B=te(x,"cheat-sheet content"),x.forEach(k),z=S(u),m&&m.l(u),j=S(u),u.forEach(k),this.h()},h(){d(l,"class","update__edit-card-title svelte-1p1c7e6"),d(l,"name",a=`${e[3].id}_${e[25]}_title`),d(l,"id",i=`${e[3].id}_${e[25]}_title`),d(r,"for",b=`${e[3].id}_${e[25]}_title`),d(r,"class","svelte-1p1c7e6"),d(f,"class",w=se(`update__remove-card ${e[4]?"--safari":""}`)+" svelte-1p1c7e6"),d(O,"class","update__edit-card-divider svelte-1p1c7e6"),d(g,"class","update__edit-card-content svelte-1p1c7e6"),d(g,"name",P=`${e[3].id}_${e[25]}`),d(g,"id",U=`${e[3].id}_${e[25]}`),d(N,"class","update__edit-card-label svelte-1p1c7e6"),d(N,"for",J=`${e[3].id}_${e[25]}`),d(t,"class","update__edit-card-wrapper svelte-1p1c7e6"),this.first=t},m(_,u){L(_,t,u),h(t,l),W(l,e[23].subtitle),h(t,s),h(t,r),h(r,c),h(t,o),h(t,f),h(f,E),h(t,y),h(t,O),h(t,D),h(t,g),W(g,e[23].content),h(t,M),h(t,N),h(N,B),h(t,z),m&&m.m(t,null),h(t,j),R||(X=[q(l,"input",Z),q(f,"click",le),q(g,"input",$)],R=!0)},p(_,u){e=_,u&8&&a!==(a=`${e[3].id}_${e[25]}_title`)&&d(l,"name",a),u&8&&i!==(i=`${e[3].id}_${e[25]}_title`)&&d(l,"id",i),u&8&&l.value!==e[23].subtitle&&W(l,e[23].subtitle),u&8&&b!==(b=`${e[3].id}_${e[25]}_title`)&&d(r,"for",b),u&16&&w!==(w=se(`update__remove-card ${e[4]?"--safari":""}`)+" svelte-1p1c7e6")&&d(f,"class",w),u&8&&P!==(P=`${e[3].id}_${e[25]}`)&&d(g,"name",P),u&8&&U!==(U=`${e[3].id}_${e[25]}`)&&d(g,"id",U),u&8&&W(g,e[23].content),u&8&&J!==(J=`${e[3].id}_${e[25]}`)&&d(N,"for",J),e[3].cards?m?m.p(e,u):(m=me(e),m.c(),m.m(t,j)):m&&(m.d(1),m=null)},r(){p=t.getBoundingClientRect()},f(){Xe(t),I()},a(){I(),I=Ke(t,p,et,{duration:250})},d(_){_&&k(t),m&&m.d(),R=!1,Ee(X)}}}function ve(n){let e,t="Save",l,a;return{c(){e=v("button"),e.textContent=t,this.h()},l(i){e=C(i,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-zer7oz"&&(e.textContent=t),this.h()},h(){d(e,"class","button update__save svelte-1p1c7e6")},m(i,s){L(i,e,s),l||(a=q(e,"click",n[5]),l=!0)},p:F,d(i){i&&k(e),l=!1,a()}}}function st(n){let e,t,l,a,i,s=n[0]&&pe(n);const r=[lt,tt],c=[];function b(o,f){return o[2]&&!o[1]?0:1}return l=b(n),a=c[l]=r[l](n),{c(){e=v("div"),s&&s.c(),t=T(),a.c(),this.h()},l(o){e=C(o,"DIV",{class:!0});var f=A(e);s&&s.l(f),t=S(f),a.l(f),f.forEach(k),this.h()},h(){d(e,"class","update__page svelte-1p1c7e6")},m(o,f){L(o,e,f),s&&s.m(e,null),h(e,t),c[l].m(e,null),i=!0},p(o,[f]){o[0]?s?(s.p(o,f),f&1&&G(s,1)):(s=pe(o),s.c(),G(s,1),s.m(e,t)):s&&(ue(),K(s,1,1,()=>{s=null}),ce());let E=l;l=b(o),l===E?c[l].p(o,f):(ue(),K(c[E],1,1,()=>{c[E]=null}),ce(),a=c[l],a?a.p(o,f):(a=c[l]=r[l](o),a.c()),G(a,1),a.m(e,null))},i(o){i||(G(s),G(a),i=!0)},o(o){K(s),K(a),i=!1},d(o){o&&k(e),s&&s.d(),c[l].d()}}}function nt(n,e,t){let l,a,i;ne(n,ze,p=>t(19,l=p)),ne(n,Me,p=>t(20,a=p)),ne(n,je,p=>t(4,i=p));const s=a.params.id;let r=!1,c=!1,b,o;const f=async()=>{try{const p=await Ge(`/cheat_sheets/${s}`,l.accessToken);t(2,b=p.data),t(3,o=structuredClone(b))}catch(p){console.log(p)}},E=async()=>{try{await Re(`/cheat_sheets/${s}`,l.accessToken,{title:o.title,language:o.language,is_published:o.is_published,cards:o.cards}),t(2,b=structuredClone(o))}catch(p){console.log(p)}},w=async()=>{try{await Ve(`/cheat_sheets/${s}`,l.accessToken),t(1,c=!0),t(0,r=!1),Fe("/dashboard")}catch(p){console.log(p)}},y=async()=>{o.cards?t(3,o.cards=[...o.cards,{subtitle:"",content:""}],o):t(3,o.cards=[{subtitle:"",content:""}],o)},O=async p=>{if(o.cards){const I=o.cards.filter((X,Z)=>Z!==p);t(3,o.cards=[...I],o);const R=document.activeElement;R&&R.blur()}};Be(()=>{f()});function D(p){r=p,t(0,r)}function g(){o.title=this.value,t(3,o)}function P(){o.language=this.value,t(3,o)}function U(p){n.$$.not_equal(o.is_published,p)&&(o.is_published=p,t(3,o))}const M=()=>t(0,r=!0);function N(p,I){p[I].subtitle=this.value,t(3,o)}const B=p=>O(p);function J(p,I){p[I].content=this.value,t(3,o)}return[r,c,b,o,i,E,w,y,O,D,g,P,U,M,N,B,J,p=>t(3,o.cards=_e(o.cards||[],p,p-1),o),p=>t(3,o.cards=_e(o.cards||[],p,p+1),o)]}class dt extends Te{constructor(e){super(),Se(this,e,nt,st,Ce,{})}}export{dt as component};
