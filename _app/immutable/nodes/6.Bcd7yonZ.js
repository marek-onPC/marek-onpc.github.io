import{n as F,i as $e,s as ge,e as Ne,c as ae,o as Se,k as ke,l as ve,r as Ce}from"../chunks/scheduler.hyw8iwdn.js";import{G as Te,H as Oe,I as Be,J as Ie,S as ye,i as we,e as C,t as x,s as N,c as y,a as A,b as ee,d as g,f as S,l as h,g as I,h as m,q,j as Le,k as j,m as K,n as ie,K as Ee,r as te,u as le,v as se,w as ne,o as oe,x as Q,p as G,z as W}from"../chunks/index.C4qMneLH.js";import{e as re,u as De,f as Pe}from"../chunks/each.Kmx-qJao.js";import{p as Ue}from"../chunks/stores.Bb6yyhsv.js";import{e as Ae,h as qe,L as Me,s as Re,a as Ve}from"../chunks/fetchClient.Dyvg9oKp.js";import{M as ze}from"../chunks/Modal.DnyFj2qe.js";import{g as Je}from"../chunks/entry.BAB27MAa.js";import{c as je}from"../chunks/index.CvmYViMX.js";function Ge(n,e,t,l){if(!e)return F;const a=n.getBoundingClientRect();if(e.left===a.left&&e.right===a.right&&e.top===a.top&&e.bottom===a.bottom)return F;const{delay:i=0,duration:s=300,easing:r=$e,start:u=Te()+i,end:o=u+s,tick:_=F,css:c}=t(n,{from:e,to:a},l);let $=!0,E=!1,k;function D(){c&&(k=Be(n,0,1,s,i,r,c)),i||(E=!0)}function v(){c&&Ie(n,k),$=!1}return Oe(w=>{if(!E&&w>=u&&(E=!0),E&&w>=o&&(_(1,0),v()),!$)return!1;if(E){const P=w-u,U=0+1*r(P/s);_(U,1-U)}return!0}),D(),_(0,1),v}function We(n){const e=getComputedStyle(n);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:t,height:l}=e,a=n.getBoundingClientRect();n.style.position="absolute",n.style.width=t,n.style.height=l,Fe(n,a)}}function Fe(n,e){const t=n.getBoundingClientRect();if(e.left!==t.left||e.top!==t.top){const l=getComputedStyle(n),a=l.transform==="none"?"":l.transform;n.style.transform=`${a} translate(${e.left-t.left}px, ${e.top-t.top}px)`}}function He(n){let e,t,l,a,i,s,r,u,o;return{c(){e=C("label"),t=C("p"),l=x(n[1]),a=N(),i=C("input"),s=N(),r=C("span"),this.h()},l(_){e=y(_,"LABEL",{class:!0});var c=A(e);t=y(c,"P",{class:!0});var $=A(t);l=ee($,n[1]),$.forEach(g),a=S(c),i=y(c,"INPUT",{type:!0,class:!0}),s=S(c),r=y(c,"SPAN",{class:!0}),A(r).forEach(g),c.forEach(g),this.h()},h(){h(t,"class","svelte-1n5ydc0"),h(i,"type","checkbox"),h(i,"class","svelte-1n5ydc0"),h(r,"class","checkmark svelte-1n5ydc0"),h(e,"class","checkbox")},m(_,c){I(_,e,c),m(e,t),m(t,l),m(e,a),m(e,i),i.checked=n[0],m(e,s),m(e,r),u||(o=q(i,"change",n[2]),u=!0)},p(_,[c]){c&2&&Le(l,_[1]),c&1&&(i.checked=_[0])},i:F,o:F,d(_){_&&g(e),u=!1,o()}}}function Ke(n,e,t){let{isChecked:l}=e,{title:a}=e;function i(){l=this.checked,t(0,l)}return n.$$set=s=>{"isChecked"in s&&t(0,l=s.isChecked),"title"in s&&t(1,a=s.title)},[l,a,i]}class Xe extends ye{constructor(e){super(),we(this,e,Ke,He,ge,{isChecked:0,title:1})}}const ue=(n,e,t)=>{if(n.length<2)throw new Error("array should have minimum 2 elements");if(e<0||e>n.length)throw new Error("'from' index is out of scope");if(t<0||t>n.length)throw new Error("'to' index is out of scope");if(e===t)throw new Error("'from' and 'to' are equal");const l=[...n];return l.splice(t,0,l.splice(e,1)[0]),l};function Qe(n,{from:e,to:t},l={}){const a=getComputedStyle(n),i=a.transform==="none"?"":a.transform,[s,r]=a.transformOrigin.split(" ").map(parseFloat),u=e.left+e.width*s/t.width-(t.left+s),o=e.top+e.height*r/t.height-(t.top+r),{delay:_=0,duration:c=E=>Math.sqrt(E)*120,easing:$=je}=l;return{delay:_,duration:Ne(c)?c(Math.sqrt(u*u+o*o)):c,easing:$,css:(E,k)=>{const D=k*u,v=k*o,w=E+k*e.width/t.width,P=E+k*e.height/t.height;return`transform: ${i} translate(${D}px, ${v}px) scale(${w}, ${P});`}}}function ce(n,e,t){const l=n.slice();return l[22]=e[t],l[23]=e,l[24]=t,l}function fe(n){let e,t,l;function a(s){n[8](s)}let i={text:`Would you like to delete ${n[3].title} cheat sheet?`,callback:n[5]};return n[0]!==void 0&&(i.isOpened=n[0]),e=new ze({props:i}),ke.push(()=>Ee(e,"isOpened",a)),{c(){te(e.$$.fragment)},l(s){le(e.$$.fragment,s)},m(s,r){se(e,s,r),l=!0},p(s,r){const u={};r&8&&(u.text=`Would you like to delete ${s[3].title} cheat sheet?`),!t&&r&1&&(t=!0,u.isOpened=s[0],ve(()=>t=!1)),e.$set(u)},i(s){l||(j(e.$$.fragment,s),l=!0)},o(s){K(e.$$.fragment,s),l=!1},d(s){ne(e,s)}}}function Ye(n){let e,t;return e=new Me({}),{c(){te(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,a){se(e,l,a),t=!0},p:F,i(l){t||(j(e.$$.fragment,l),t=!0)},o(l){K(e.$$.fragment,l),t=!1},d(l){ne(e,l)}}}function Ze(n){let e,t,l,a,i,s="title",r,u,o,_,c,$="language",E,k,D,v,w,P="♻",U,O,B,V="+",z,J=JSON.stringify(n[2])!==JSON.stringify(n[3]),p,L,M,X;function Y(d){n[11](d)}let Z={title:"Publish"};n[3].is_published!==void 0&&(Z.isChecked=n[3].is_published),k=new Xe({props:Z}),ke.push(()=>Ee(k,"isChecked",Y));let T=n[3].cards&&de(n),b=J&&be(n);return{c(){e=C("div"),t=C("div"),l=C("input"),a=N(),i=C("label"),i.textContent=s,r=N(),u=C("div"),o=C("input"),_=N(),c=C("label"),c.textContent=$,E=N(),te(k.$$.fragment),v=N(),w=C("button"),w.textContent=P,U=N(),T&&T.c(),O=N(),B=C("button"),B.textContent=V,z=N(),b&&b.c(),p=Q(),this.h()},l(d){e=y(d,"DIV",{class:!0});var f=A(e);t=y(f,"DIV",{class:!0});var R=A(t);l=y(R,"INPUT",{name:!0,type:!0,class:!0}),a=S(R),i=y(R,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),G(i)!=="svelte-153g75m"&&(i.textContent=s),R.forEach(g),r=S(f),u=y(f,"DIV",{class:!0});var H=A(u);o=y(H,"INPUT",{name:!0,type:!0,class:!0}),_=S(H),c=y(H,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),G(c)!=="svelte-68okq"&&(c.textContent=$),H.forEach(g),E=S(f),le(k.$$.fragment,f),v=S(f),w=y(f,"BUTTON",{class:!0,"data-svelte-h":!0}),G(w)!=="svelte-16xsbxx"&&(w.textContent=P),f.forEach(g),U=S(d),T&&T.l(d),O=S(d),B=y(d,"BUTTON",{class:!0,"data-svelte-h":!0}),G(B)!=="svelte-1aajpiv"&&(B.textContent=V),z=S(d),b&&b.l(d),p=Q(),this.h()},h(){h(l,"name","title"),h(l,"type","text"),h(l,"class","update__title svelte-1n3u0sc"),h(i,"for","title"),h(i,"class","svelte-1n3u0sc"),h(t,"class","update__title-wrapper svelte-1n3u0sc"),h(o,"name","language"),h(o,"type","text"),h(o,"class","update__language svelte-1n3u0sc"),h(c,"for","language"),h(c,"class","svelte-1n3u0sc"),h(u,"class","update__language-wrapper svelte-1n3u0sc"),h(w,"class","button update__delete svelte-1n3u0sc"),h(e,"class","update__header svelte-1n3u0sc"),h(B,"class","button update__add svelte-1n3u0sc")},m(d,f){I(d,e,f),m(e,t),m(t,l),W(l,n[3].title),m(t,a),m(t,i),m(e,r),m(e,u),m(u,o),W(o,n[3].language),m(u,_),m(u,c),m(e,E),se(k,e,null),m(e,v),m(e,w),I(d,U,f),T&&T.m(d,f),I(d,O,f),I(d,B,f),I(d,z,f),b&&b.m(d,f),I(d,p,f),L=!0,M||(X=[q(l,"input",n[9]),q(o,"input",n[10]),q(w,"click",n[12]),q(B,"click",n[6])],M=!0)},p(d,f){f&8&&l.value!==d[3].title&&W(l,d[3].title),f&8&&o.value!==d[3].language&&W(o,d[3].language);const R={};!D&&f&8&&(D=!0,R.isChecked=d[3].is_published,ve(()=>D=!1)),k.$set(R),d[3].cards?T?T.p(d,f):(T=de(d),T.c(),T.m(O.parentNode,O)):T&&(T.d(1),T=null),f&12&&(J=JSON.stringify(d[2])!==JSON.stringify(d[3])),J?b?b.p(d,f):(b=be(d),b.c(),b.m(p.parentNode,p)):b&&(b.d(1),b=null)},i(d){L||(j(k.$$.fragment,d),L=!0)},o(d){K(k.$$.fragment,d),L=!1},d(d){d&&(g(e),g(U),g(O),g(B),g(z),g(p)),ne(k),T&&T.d(d),b&&b.d(d),M=!1,Ce(X)}}}function de(n){let e=[],t=new Map,l,a=re(n[3].cards);const i=s=>s[22];for(let s=0;s<a.length;s+=1){let r=ce(n,a,s),u=i(r);t.set(u,e[s]=me(u,r))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();l=Q()},l(s){for(let r=0;r<e.length;r+=1)e[r].l(s);l=Q()},m(s,r){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(s,r);I(s,l,r)},p(s,r){if(r&136){a=re(s[3].cards);for(let u=0;u<e.length;u+=1)e[u].r();e=De(e,r,i,1,s,a,t,l.parentNode,Pe,me,l,ce);for(let u=0;u<e.length;u+=1)e[u].a()}},d(s){s&&g(l);for(let r=0;r<e.length;r+=1)e[r].d(s)}}}function _e(n){let e,t,l=n[24]>0&&he(n),a=n[24]<n[3].cards.length-1&&pe(n);return{c(){l&&l.c(),e=N(),a&&a.c(),t=Q()},l(i){l&&l.l(i),e=S(i),a&&a.l(i),t=Q()},m(i,s){l&&l.m(i,s),I(i,e,s),a&&a.m(i,s),I(i,t,s)},p(i,s){i[24]>0?l?l.p(i,s):(l=he(i),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null),i[24]<i[3].cards.length-1?a?a.p(i,s):(a=pe(i),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null)},d(i){i&&(g(e),g(t)),l&&l.d(i),a&&a.d(i)}}}function he(n){let e,t="▲",l,a;function i(){return n[16](n[24])}return{c(){e=C("button"),e.textContent=t,this.h()},l(s){e=y(s,"BUTTON",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-392haw"&&(e.textContent=t),this.h()},h(){h(e,"class","update__move-up-card arrow-up svelte-1n3u0sc")},m(s,r){I(s,e,r),l||(a=q(e,"click",i),l=!0)},p(s,r){n=s},d(s){s&&g(e),l=!1,a()}}}function pe(n){let e,t="▼",l,a;function i(){return n[17](n[24])}return{c(){e=C("button"),e.textContent=t,this.h()},l(s){e=y(s,"BUTTON",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-ro4z82"&&(e.textContent=t),this.h()},h(){h(e,"class","update__move-down-card svelte-1n3u0sc")},m(s,r){I(s,e,r),l||(a=q(e,"click",i),l=!0)},p(s,r){n=s},d(s){s&&g(e),l=!1,a()}}}function me(n,e){let t,l,a,i,s,r,u,o,_,c,$="♻",E,k,D,v,w,P,U,O,B,V,z,J,p,L=F,M,X;function Y(){e[13].call(l,e[23],e[24])}function Z(){return e[14](e[24])}function T(){e[15].call(v,e[23],e[24])}let b=e[3].cards&&_e(e);return{key:n,first:null,c(){t=C("div"),l=C("input"),s=N(),r=C("label"),u=x("subtitle"),_=N(),c=C("button"),c.textContent=$,E=N(),k=C("div"),D=N(),v=C("textarea"),U=N(),O=C("label"),B=x("cheat-sheet content"),z=N(),b&&b.c(),J=N(),this.h()},l(d){t=y(d,"DIV",{class:!0});var f=A(t);l=y(f,"INPUT",{class:!0,name:!0,id:!0}),s=S(f),r=y(f,"LABEL",{for:!0,class:!0});var R=A(r);u=ee(R,"subtitle"),R.forEach(g),_=S(f),c=y(f,"BUTTON",{class:!0,"data-svelte-h":!0}),G(c)!=="svelte-1dzm0rf"&&(c.textContent=$),E=S(f),k=y(f,"DIV",{class:!0}),A(k).forEach(g),D=S(f),v=y(f,"TEXTAREA",{class:!0,name:!0,id:!0}),A(v).forEach(g),U=S(f),O=y(f,"LABEL",{class:!0,for:!0});var H=A(O);B=ee(H,"cheat-sheet content"),H.forEach(g),z=S(f),b&&b.l(f),J=S(f),f.forEach(g),this.h()},h(){h(l,"class","update__edit-card-title svelte-1n3u0sc"),h(l,"name",a=`${e[3].id}_${e[24]}_title`),h(l,"id",i=`${e[3].id}_${e[24]}_title`),h(r,"for",o=`${e[3].id}_${e[24]}_title`),h(r,"class","svelte-1n3u0sc"),h(c,"class","update__remove-card svelte-1n3u0sc"),h(k,"class","update__edit-card-divider svelte-1n3u0sc"),h(v,"class","update__edit-card-content svelte-1n3u0sc"),h(v,"name",w=`${e[3].id}_${e[24]}`),h(v,"id",P=`${e[3].id}_${e[24]}`),h(O,"class","update__edit-card-label svelte-1n3u0sc"),h(O,"for",V=`${e[3].id}_${e[24]}`),h(t,"class","update__edit-card-wrapper svelte-1n3u0sc"),this.first=t},m(d,f){I(d,t,f),m(t,l),W(l,e[22].subtitle),m(t,s),m(t,r),m(r,u),m(t,_),m(t,c),m(t,E),m(t,k),m(t,D),m(t,v),W(v,e[22].content),m(t,U),m(t,O),m(O,B),m(t,z),b&&b.m(t,null),m(t,J),M||(X=[q(l,"input",Y),q(c,"click",Z),q(v,"input",T)],M=!0)},p(d,f){e=d,f&8&&a!==(a=`${e[3].id}_${e[24]}_title`)&&h(l,"name",a),f&8&&i!==(i=`${e[3].id}_${e[24]}_title`)&&h(l,"id",i),f&8&&l.value!==e[22].subtitle&&W(l,e[22].subtitle),f&8&&o!==(o=`${e[3].id}_${e[24]}_title`)&&h(r,"for",o),f&8&&w!==(w=`${e[3].id}_${e[24]}`)&&h(v,"name",w),f&8&&P!==(P=`${e[3].id}_${e[24]}`)&&h(v,"id",P),f&8&&W(v,e[22].content),f&8&&V!==(V=`${e[3].id}_${e[24]}`)&&h(O,"for",V),e[3].cards?b?b.p(e,f):(b=_e(e),b.c(),b.m(t,J)):b&&(b.d(1),b=null)},r(){p=t.getBoundingClientRect()},f(){We(t),L()},a(){L(),L=Ge(t,p,Qe,{duration:250})},d(d){d&&g(t),b&&b.d(),M=!1,Ce(X)}}}function be(n){let e,t="Save",l,a;return{c(){e=C("button"),e.textContent=t,this.h()},l(i){e=y(i,"BUTTON",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-zer7oz"&&(e.textContent=t),this.h()},h(){h(e,"class","button update__save svelte-1n3u0sc")},m(i,s){I(i,e,s),l||(a=q(e,"click",n[4]),l=!0)},p:F,d(i){i&&g(e),l=!1,a()}}}function xe(n){let e,t,l,a,i,s=n[0]&&fe(n);const r=[Ze,Ye],u=[];function o(_,c){return _[2]&&!_[1]?0:1}return l=o(n),a=u[l]=r[l](n),{c(){e=C("div"),s&&s.c(),t=N(),a.c(),this.h()},l(_){e=y(_,"DIV",{class:!0});var c=A(e);s&&s.l(c),t=S(c),a.l(c),c.forEach(g),this.h()},h(){h(e,"class","update__page svelte-1n3u0sc")},m(_,c){I(_,e,c),s&&s.m(e,null),m(e,t),u[l].m(e,null),i=!0},p(_,[c]){_[0]?s?(s.p(_,c),c&1&&j(s,1)):(s=fe(_),s.c(),j(s,1),s.m(e,t)):s&&(oe(),K(s,1,1,()=>{s=null}),ie());let $=l;l=o(_),l===$?u[l].p(_,c):(oe(),K(u[$],1,1,()=>{u[$]=null}),ie(),a=u[l],a?a.p(_,c):(a=u[l]=r[l](_),a.c()),j(a,1),a.m(e,null))},i(_){i||(j(s),j(a),i=!0)},o(_){K(s),K(a),i=!1},d(_){_&&g(e),s&&s.d(),u[l].d()}}}function et(n,e,t){let l,a;ae(n,Re,p=>t(18,l=p)),ae(n,Ue,p=>t(19,a=p));const i=a.params.id;let s=!1,r=!1,u,o;const _=async()=>{try{const p=await Ve(`/cheat_sheets/${i}`,l.token);t(2,u=p.data),t(3,o=structuredClone(u))}catch(p){console.log(p)}},c=async()=>{try{await Ae(`/cheat_sheets/${i}`,l.token,{title:o.title,language:o.language,is_published:o.is_published,cards:o.cards}),t(2,u=structuredClone(o))}catch(p){console.log(p)}},$=async()=>{try{await qe(`/cheat_sheets/${i}`,l.token),t(1,r=!0),t(0,s=!1),Je("/dashboard")}catch(p){console.log(p)}},E=async()=>{o.cards?t(3,o.cards=[...o.cards,{subtitle:"",content:""}],o):t(3,o.cards=[{subtitle:"",content:""}],o)},k=async p=>{if(o.cards){const L=o.cards.filter((X,Y)=>Y!==p);t(3,o.cards=[...L],o);const M=document.activeElement;M&&M.blur()}};Se(()=>{_()});function D(p){s=p,t(0,s)}function v(){o.title=this.value,t(3,o)}function w(){o.language=this.value,t(3,o)}function P(p){n.$$.not_equal(o.is_published,p)&&(o.is_published=p,t(3,o))}const U=()=>t(0,s=!0);function O(p,L){p[L].subtitle=this.value,t(3,o)}const B=p=>k(p);function V(p,L){p[L].content=this.value,t(3,o)}return[s,r,u,o,c,$,E,k,D,v,w,P,U,O,B,V,p=>t(3,o.cards=ue(o.cards||[],p,p-1),o),p=>t(3,o.cards=ue(o.cards||[],p,p+1),o)]}class ut extends ye{constructor(e){super(),we(this,e,et,xe,ge,{})}}export{ut as component};
