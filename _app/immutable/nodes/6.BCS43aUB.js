import{n as W,i as $e,s as ge,e as Ne,c as ae,o as Se,k as ke,l as ve,r as Ce}from"../chunks/scheduler.DK69kJ6-.js";import{F as Te,G as Oe,H as Be,I as Ie,S as ye,i as we,e as C,t as x,s as N,c as y,a as A,b as ee,d as g,f as S,l as h,g as I,h as b,q,j as Le,k as j,m as X,n as ie,J as Ee,r as te,u as le,v as se,w as ne,o as oe,x as Q,p as F,z as G}from"../chunks/index.9LPLAK6w.js";import{e as re,u as De,f as Pe}from"../chunks/each.CDzrhvE_.js";import{p as Ue}from"../chunks/stores.ZXqkMPVh.js";import{e as Ae,g as qe,L as Me,a as Re}from"../chunks/fetchClient.BXYtG4YK.js";import{s as Ve}from"../chunks/stores.BOZIaDlc.js";import{M as ze}from"../chunks/Modal.H7pPql7a.js";import{g as Je}from"../chunks/entry.DFc5k-h5.js";function je(n,e,t,l){if(!e)return W;const a=n.getBoundingClientRect();if(e.left===a.left&&e.right===a.right&&e.top===a.top&&e.bottom===a.bottom)return W;const{delay:i=0,duration:s=300,easing:r=$e,start:c=Te()+i,end:o=c+s,tick:_=W,css:u}=t(n,{from:e,to:a},l);let $=!0,E=!1,k;function D(){u&&(k=Be(n,0,1,s,i,r,u)),i||(E=!0)}function v(){u&&Ie(n,k),$=!1}return Oe(w=>{if(!E&&w>=c&&(E=!0),E&&w>=o&&(_(1,0),v()),!$)return!1;if(E){const P=w-c,U=0+1*r(P/s);_(U,1-U)}return!0}),D(),_(0,1),v}function Fe(n){const e=getComputedStyle(n);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:t,height:l}=e,a=n.getBoundingClientRect();n.style.position="absolute",n.style.width=t,n.style.height=l,Ge(n,a)}}function Ge(n,e){const t=n.getBoundingClientRect();if(e.left!==t.left||e.top!==t.top){const l=getComputedStyle(n),a=l.transform==="none"?"":l.transform;n.style.transform=`${a} translate(${e.left-t.left}px, ${e.top-t.top}px)`}}function We(n){const e=n-1;return e*e*e+1}function He(n){let e,t,l,a,i,s,r,c,o;return{c(){e=C("label"),t=C("p"),l=x(n[1]),a=N(),i=C("input"),s=N(),r=C("span"),this.h()},l(_){e=y(_,"LABEL",{class:!0});var u=A(e);t=y(u,"P",{class:!0});var $=A(t);l=ee($,n[1]),$.forEach(g),a=S(u),i=y(u,"INPUT",{type:!0,class:!0}),s=S(u),r=y(u,"SPAN",{class:!0}),A(r).forEach(g),u.forEach(g),this.h()},h(){h(t,"class","svelte-1n5ydc0"),h(i,"type","checkbox"),h(i,"class","svelte-1n5ydc0"),h(r,"class","checkmark svelte-1n5ydc0"),h(e,"class","checkbox")},m(_,u){I(_,e,u),b(e,t),b(t,l),b(e,a),b(e,i),i.checked=n[0],b(e,s),b(e,r),c||(o=q(i,"change",n[2]),c=!0)},p(_,[u]){u&2&&Le(l,_[1]),u&1&&(i.checked=_[0])},i:W,o:W,d(_){_&&g(e),c=!1,o()}}}function Xe(n,e,t){let{isChecked:l}=e,{title:a}=e;function i(){l=this.checked,t(0,l)}return n.$$set=s=>{"isChecked"in s&&t(0,l=s.isChecked),"title"in s&&t(1,a=s.title)},[l,a,i]}class Ke extends ye{constructor(e){super(),we(this,e,Xe,He,ge,{isChecked:0,title:1})}}const ce=(n,e,t)=>{if(n.length<2)throw new Error("array should have minimum 2 elements");if(e<0||e>n.length)throw new Error("'from' index is out of scope");if(t<0||t>n.length)throw new Error("'to' index is out of scope");if(e===t)throw new Error("'from' and 'to' are equal");const l=[...n];return l.splice(t,0,l.splice(e,1)[0]),l};function Qe(n,{from:e,to:t},l={}){const a=getComputedStyle(n),i=a.transform==="none"?"":a.transform,[s,r]=a.transformOrigin.split(" ").map(parseFloat),c=e.left+e.width*s/t.width-(t.left+s),o=e.top+e.height*r/t.height-(t.top+r),{delay:_=0,duration:u=E=>Math.sqrt(E)*120,easing:$=We}=l;return{delay:_,duration:Ne(u)?u(Math.sqrt(c*c+o*o)):u,easing:$,css:(E,k)=>{const D=k*c,v=k*o,w=E+k*e.width/t.width,P=E+k*e.height/t.height;return`transform: ${i} translate(${D}px, ${v}px) scale(${w}, ${P});`}}}function ue(n,e,t){const l=n.slice();return l[22]=e[t],l[23]=e,l[24]=t,l}function fe(n){let e,t,l;function a(s){n[8](s)}let i={text:`Would you like to delete ${n[3].title} cheat sheet?`,callback:n[5]};return n[0]!==void 0&&(i.isOpened=n[0]),e=new ze({props:i}),ke.push(()=>Ee(e,"isOpened",a)),{c(){te(e.$$.fragment)},l(s){le(e.$$.fragment,s)},m(s,r){se(e,s,r),l=!0},p(s,r){const c={};r&8&&(c.text=`Would you like to delete ${s[3].title} cheat sheet?`),!t&&r&1&&(t=!0,c.isOpened=s[0],ve(()=>t=!1)),e.$set(c)},i(s){l||(j(e.$$.fragment,s),l=!0)},o(s){X(e.$$.fragment,s),l=!1},d(s){ne(e,s)}}}function Ye(n){let e,t;return e=new Me({}),{c(){te(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,a){se(e,l,a),t=!0},p:W,i(l){t||(j(e.$$.fragment,l),t=!0)},o(l){X(e.$$.fragment,l),t=!1},d(l){ne(e,l)}}}function Ze(n){let e,t,l,a,i,s="title",r,c,o,_,u,$="language",E,k,D,v,w,P="♻",U,O,B,V="+",z,J=JSON.stringify(n[2])!==JSON.stringify(n[3]),p,L,M,K;function Y(d){n[11](d)}let Z={title:"Publish"};n[3].is_published!==void 0&&(Z.isChecked=n[3].is_published),k=new Ke({props:Z}),ke.push(()=>Ee(k,"isChecked",Y));let T=n[3].cards&&de(n),m=J&&me(n);return{c(){e=C("div"),t=C("div"),l=C("input"),a=N(),i=C("label"),i.textContent=s,r=N(),c=C("div"),o=C("input"),_=N(),u=C("label"),u.textContent=$,E=N(),te(k.$$.fragment),v=N(),w=C("button"),w.textContent=P,U=N(),T&&T.c(),O=N(),B=C("button"),B.textContent=V,z=N(),m&&m.c(),p=Q(),this.h()},l(d){e=y(d,"DIV",{class:!0});var f=A(e);t=y(f,"DIV",{class:!0});var R=A(t);l=y(R,"INPUT",{name:!0,type:!0,class:!0}),a=S(R),i=y(R,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),F(i)!=="svelte-153g75m"&&(i.textContent=s),R.forEach(g),r=S(f),c=y(f,"DIV",{class:!0});var H=A(c);o=y(H,"INPUT",{name:!0,type:!0,class:!0}),_=S(H),u=y(H,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),F(u)!=="svelte-68okq"&&(u.textContent=$),H.forEach(g),E=S(f),le(k.$$.fragment,f),v=S(f),w=y(f,"BUTTON",{class:!0,"data-svelte-h":!0}),F(w)!=="svelte-16xsbxx"&&(w.textContent=P),f.forEach(g),U=S(d),T&&T.l(d),O=S(d),B=y(d,"BUTTON",{class:!0,"data-svelte-h":!0}),F(B)!=="svelte-1aajpiv"&&(B.textContent=V),z=S(d),m&&m.l(d),p=Q(),this.h()},h(){h(l,"name","title"),h(l,"type","text"),h(l,"class","update__title svelte-1a22bct"),h(i,"for","title"),h(i,"class","svelte-1a22bct"),h(t,"class","update__title-wrapper svelte-1a22bct"),h(o,"name","language"),h(o,"type","text"),h(o,"class","update__language svelte-1a22bct"),h(u,"for","language"),h(u,"class","svelte-1a22bct"),h(c,"class","update__language-wrapper svelte-1a22bct"),h(w,"class","button update__delete svelte-1a22bct"),h(e,"class","update__header svelte-1a22bct"),h(B,"class","button update__add svelte-1a22bct")},m(d,f){I(d,e,f),b(e,t),b(t,l),G(l,n[3].title),b(t,a),b(t,i),b(e,r),b(e,c),b(c,o),G(o,n[3].language),b(c,_),b(c,u),b(e,E),se(k,e,null),b(e,v),b(e,w),I(d,U,f),T&&T.m(d,f),I(d,O,f),I(d,B,f),I(d,z,f),m&&m.m(d,f),I(d,p,f),L=!0,M||(K=[q(l,"input",n[9]),q(o,"input",n[10]),q(w,"click",n[12]),q(B,"click",n[6])],M=!0)},p(d,f){f&8&&l.value!==d[3].title&&G(l,d[3].title),f&8&&o.value!==d[3].language&&G(o,d[3].language);const R={};!D&&f&8&&(D=!0,R.isChecked=d[3].is_published,ve(()=>D=!1)),k.$set(R),d[3].cards?T?T.p(d,f):(T=de(d),T.c(),T.m(O.parentNode,O)):T&&(T.d(1),T=null),f&12&&(J=JSON.stringify(d[2])!==JSON.stringify(d[3])),J?m?m.p(d,f):(m=me(d),m.c(),m.m(p.parentNode,p)):m&&(m.d(1),m=null)},i(d){L||(j(k.$$.fragment,d),L=!0)},o(d){X(k.$$.fragment,d),L=!1},d(d){d&&(g(e),g(U),g(O),g(B),g(z),g(p)),ne(k),T&&T.d(d),m&&m.d(d),M=!1,Ce(K)}}}function de(n){let e=[],t=new Map,l,a=re(n[3].cards);const i=s=>s[22];for(let s=0;s<a.length;s+=1){let r=ue(n,a,s),c=i(r);t.set(c,e[s]=be(c,r))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();l=Q()},l(s){for(let r=0;r<e.length;r+=1)e[r].l(s);l=Q()},m(s,r){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(s,r);I(s,l,r)},p(s,r){if(r&136){a=re(s[3].cards);for(let c=0;c<e.length;c+=1)e[c].r();e=De(e,r,i,1,s,a,t,l.parentNode,Pe,be,l,ue);for(let c=0;c<e.length;c+=1)e[c].a()}},d(s){s&&g(l);for(let r=0;r<e.length;r+=1)e[r].d(s)}}}function _e(n){let e,t,l=n[24]>0&&he(n),a=n[24]<n[3].cards.length-1&&pe(n);return{c(){l&&l.c(),e=N(),a&&a.c(),t=Q()},l(i){l&&l.l(i),e=S(i),a&&a.l(i),t=Q()},m(i,s){l&&l.m(i,s),I(i,e,s),a&&a.m(i,s),I(i,t,s)},p(i,s){i[24]>0?l?l.p(i,s):(l=he(i),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null),i[24]<i[3].cards.length-1?a?a.p(i,s):(a=pe(i),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null)},d(i){i&&(g(e),g(t)),l&&l.d(i),a&&a.d(i)}}}function he(n){let e,t="▲",l,a;function i(){return n[16](n[24])}return{c(){e=C("button"),e.textContent=t,this.h()},l(s){e=y(s,"BUTTON",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-392haw"&&(e.textContent=t),this.h()},h(){h(e,"class","update__move-up-card arrow-up svelte-1a22bct")},m(s,r){I(s,e,r),l||(a=q(e,"click",i),l=!0)},p(s,r){n=s},d(s){s&&g(e),l=!1,a()}}}function pe(n){let e,t="▼",l,a;function i(){return n[17](n[24])}return{c(){e=C("button"),e.textContent=t,this.h()},l(s){e=y(s,"BUTTON",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-ro4z82"&&(e.textContent=t),this.h()},h(){h(e,"class","update__move-down-card svelte-1a22bct")},m(s,r){I(s,e,r),l||(a=q(e,"click",i),l=!0)},p(s,r){n=s},d(s){s&&g(e),l=!1,a()}}}function be(n,e){let t,l,a,i,s,r,c,o,_,u,$="♻",E,k,D,v,w,P,U,O,B,V,z,J,p,L=W,M,K;function Y(){e[13].call(l,e[23],e[24])}function Z(){return e[14](e[24])}function T(){e[15].call(v,e[23],e[24])}let m=e[3].cards&&_e(e);return{key:n,first:null,c(){t=C("div"),l=C("input"),s=N(),r=C("label"),c=x("subtitle"),_=N(),u=C("button"),u.textContent=$,E=N(),k=C("div"),D=N(),v=C("textarea"),U=N(),O=C("label"),B=x("cheat-sheet content"),z=N(),m&&m.c(),J=N(),this.h()},l(d){t=y(d,"DIV",{class:!0});var f=A(t);l=y(f,"INPUT",{class:!0,name:!0,id:!0}),s=S(f),r=y(f,"LABEL",{for:!0,class:!0});var R=A(r);c=ee(R,"subtitle"),R.forEach(g),_=S(f),u=y(f,"BUTTON",{class:!0,"data-svelte-h":!0}),F(u)!=="svelte-1dzm0rf"&&(u.textContent=$),E=S(f),k=y(f,"DIV",{class:!0}),A(k).forEach(g),D=S(f),v=y(f,"TEXTAREA",{class:!0,name:!0,id:!0}),A(v).forEach(g),U=S(f),O=y(f,"LABEL",{class:!0,for:!0});var H=A(O);B=ee(H,"cheat-sheet content"),H.forEach(g),z=S(f),m&&m.l(f),J=S(f),f.forEach(g),this.h()},h(){h(l,"class","update__edit-card-title svelte-1a22bct"),h(l,"name",a=`${e[3].id}_${e[24]}_title`),h(l,"id",i=`${e[3].id}_${e[24]}_title`),h(r,"for",o=`${e[3].id}_${e[24]}_title`),h(r,"class","svelte-1a22bct"),h(u,"class","update__remove-card svelte-1a22bct"),h(k,"class","update__edit-card-divider svelte-1a22bct"),h(v,"class","update__edit-card-content svelte-1a22bct"),h(v,"name",w=`${e[3].id}_${e[24]}`),h(v,"id",P=`${e[3].id}_${e[24]}`),h(O,"class","update__edit-card-label svelte-1a22bct"),h(O,"for",V=`${e[3].id}_${e[24]}`),h(t,"class","update__edit-card-wrapper svelte-1a22bct"),this.first=t},m(d,f){I(d,t,f),b(t,l),G(l,e[22].subtitle),b(t,s),b(t,r),b(r,c),b(t,_),b(t,u),b(t,E),b(t,k),b(t,D),b(t,v),G(v,e[22].content),b(t,U),b(t,O),b(O,B),b(t,z),m&&m.m(t,null),b(t,J),M||(K=[q(l,"input",Y),q(u,"click",Z),q(v,"input",T)],M=!0)},p(d,f){e=d,f&8&&a!==(a=`${e[3].id}_${e[24]}_title`)&&h(l,"name",a),f&8&&i!==(i=`${e[3].id}_${e[24]}_title`)&&h(l,"id",i),f&8&&l.value!==e[22].subtitle&&G(l,e[22].subtitle),f&8&&o!==(o=`${e[3].id}_${e[24]}_title`)&&h(r,"for",o),f&8&&w!==(w=`${e[3].id}_${e[24]}`)&&h(v,"name",w),f&8&&P!==(P=`${e[3].id}_${e[24]}`)&&h(v,"id",P),f&8&&G(v,e[22].content),f&8&&V!==(V=`${e[3].id}_${e[24]}`)&&h(O,"for",V),e[3].cards?m?m.p(e,f):(m=_e(e),m.c(),m.m(t,J)):m&&(m.d(1),m=null)},r(){p=t.getBoundingClientRect()},f(){Fe(t),L()},a(){L(),L=je(t,p,Qe,{duration:250})},d(d){d&&g(t),m&&m.d(),M=!1,Ce(K)}}}function me(n){let e,t="Save",l,a;return{c(){e=C("button"),e.textContent=t,this.h()},l(i){e=y(i,"BUTTON",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-zer7oz"&&(e.textContent=t),this.h()},h(){h(e,"class","button update__save svelte-1a22bct")},m(i,s){I(i,e,s),l||(a=q(e,"click",n[4]),l=!0)},p:W,d(i){i&&g(e),l=!1,a()}}}function xe(n){let e,t,l,a,i,s=n[0]&&fe(n);const r=[Ze,Ye],c=[];function o(_,u){return _[2]&&!_[1]?0:1}return l=o(n),a=c[l]=r[l](n),{c(){e=C("div"),s&&s.c(),t=N(),a.c(),this.h()},l(_){e=y(_,"DIV",{class:!0});var u=A(e);s&&s.l(u),t=S(u),a.l(u),u.forEach(g),this.h()},h(){h(e,"class","update__page svelte-1a22bct")},m(_,u){I(_,e,u),s&&s.m(e,null),b(e,t),c[l].m(e,null),i=!0},p(_,[u]){_[0]?s?(s.p(_,u),u&1&&j(s,1)):(s=fe(_),s.c(),j(s,1),s.m(e,t)):s&&(oe(),X(s,1,1,()=>{s=null}),ie());let $=l;l=o(_),l===$?c[l].p(_,u):(oe(),X(c[$],1,1,()=>{c[$]=null}),ie(),a=c[l],a?a.p(_,u):(a=c[l]=r[l](_),a.c()),j(a,1),a.m(e,null))},i(_){i||(j(s),j(a),i=!0)},o(_){X(s),X(a),i=!1},d(_){_&&g(e),s&&s.d(),c[l].d()}}}function et(n,e,t){let l,a;ae(n,Ve,p=>t(18,l=p)),ae(n,Ue,p=>t(19,a=p));const i=a.params.id;let s=!1,r=!1,c,o;const _=async()=>{try{const p=await Re(`/cheat_sheets/${i}`,l.token);t(2,c=p.data),t(3,o=structuredClone(c))}catch(p){console.log(p)}},u=async()=>{try{await Ae(`/cheat_sheets/${i}`,l.token,{title:o.title,language:o.language,is_published:o.is_published,cards:o.cards}),t(2,c=structuredClone(o))}catch(p){console.log(p)}},$=async()=>{try{await qe(`/cheat_sheets/${i}`,l.token),t(1,r=!0),t(0,s=!1),Je("/dashboard")}catch(p){console.log(p)}},E=async()=>{o.cards?t(3,o.cards=[...o.cards,{subtitle:"",content:""}],o):t(3,o.cards=[{subtitle:"",content:""}],o)},k=async p=>{if(o.cards){const L=o.cards.filter((K,Y)=>Y!==p);t(3,o.cards=[...L],o);const M=document.activeElement;M&&M.blur()}};Se(()=>{_()});function D(p){s=p,t(0,s)}function v(){o.title=this.value,t(3,o)}function w(){o.language=this.value,t(3,o)}function P(p){n.$$.not_equal(o.is_published,p)&&(o.is_published=p,t(3,o))}const U=()=>t(0,s=!0);function O(p,L){p[L].subtitle=this.value,t(3,o)}const B=p=>k(p);function V(p,L){p[L].content=this.value,t(3,o)}return[s,r,c,o,u,$,E,k,D,v,w,P,U,O,B,V,p=>t(3,o.cards=ce(o.cards||[],p,p-1),o),p=>t(3,o.cards=ce(o.cards||[],p,p+1),o)]}class ct extends ye{constructor(e){super(),we(this,e,et,xe,ge,{})}}export{ct as component};
