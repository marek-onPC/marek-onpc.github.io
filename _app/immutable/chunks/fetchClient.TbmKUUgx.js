import{w as C}from"./index.BeiUWtba.js";import{s as P,h as m,n as y,o as I,a as v}from"./scheduler.hyw8iwdn.js";import{S as A,i as L,e as d,t as O,c as T,a as E,b as j,d as w,l as p,g as D,h as g,j as b}from"./index.C4qMneLH.js";const f="san-3jshd7-token",_="san-m85naG-expiry",S="san-6sU5gl-refresh",u="https://site-and-notes.herokuapp.com",W=({accessToken:e,refreshToken:t,expiry:s})=>{window.localStorage.setItem(f,e),window.localStorage.setItem(S,t),window.localStorage.setItem(_,s?s.toISOString():"")},k=()=>{const e=window.localStorage.getItem(f)||"",t=window.localStorage.getItem(S)||"",s=window.localStorage.getItem(_)||"";let n=new Date;return s&&(n=new Date(s)),{accessToken:e,refreshToken:t,expiry:n,tokenType:"Bearer"}},$=()=>{window.localStorage.removeItem(f),window.localStorage.removeItem(S),window.localStorage.removeItem(_)};let G=k();const N=C(G);function B(e){let t,s,n,a,o;return{c(){t=d("div"),s=d("p"),n=O(e[3]),this.h()},l(r){t=T(r,"DIV",{class:!0});var i=E(t);s=T(i,"P",{class:!0});var h=E(s);n=j(h,e[3]),h.forEach(w),i.forEach(w),this.h()},h(){p(s,"class",a=m(`loader__character ${e[0]&&"--small"} ${e[1]&&"--white"}`)+" svelte-18o11e6"),p(t,"class",o=m(`loader ${e[2]&&"--small-margin"}`)+" svelte-18o11e6")},m(r,i){D(r,t,i),g(t,s),g(s,n)},p(r,[i]){i&8&&b(n,r[3]),i&3&&a!==(a=m(`loader__character ${r[0]&&"--small"} ${r[1]&&"--white"}`)+" svelte-18o11e6")&&p(s,"class",a),i&4&&o!==(o=m(`loader ${r[2]&&"--small-margin"}`)+" svelte-18o11e6")&&p(t,"class",o)},i:y,o:y,d(r){r&&w(t)}}}function R(e,t,s){let{isSmall:n=!1}=t,{isWhite:a=!1}=t,{smallMargin:o=!1}=t,r=["⚀","⚁","⚂","⚃","⚄","⚅"],i="⚀",h;return I(()=>{h=setInterval(()=>{s(3,i=r[Math.floor(Math.random()*r.length)])},350)}),v(()=>{clearInterval(h)}),e.$$set=c=>{"isSmall"in c&&s(0,n=c.isSmall),"isWhite"in c&&s(1,a=c.isWhite),"smallMargin"in c&&s(2,o=c.smallMargin)},[n,a,o,i]}class F extends A{constructor(t){super(),L(this,t,R,B,P,{isSmall:0,isWhite:1,smallMargin:2})}}var l=(e=>(e.POST="POST",e.GET="GET",e.PATCH="PATCH",e.DELETE="DELETE",e))(l||{});const M=e=>{let t={};return e.is_published__list&&(t={...t,is_published__list:e.is_published__list.join(",")}),new URLSearchParams(t)},J=async(e,t)=>await fetch(`${u}/api${e}`,{method:l.POST,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(async n=>{if(n.status!==200)throw new Error(n.statusText);const a=n.status,o=await n.json();return{status:a,data:o}}),V=async e=>await fetch(`${u}/api${e}`,{method:l.GET,headers:{"Content-Type":"application/json"}}).then(async s=>{if(s.status!==200)throw new Error(s.statusText);const n=s.status,a=await s.json();return{status:n,data:a}}),q=async(e,t,s)=>{const n=s?M(s):"";return await fetch(`${u}/api${e}?${n}`,{method:l.GET,headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}).then(async o=>{if(o.status!==200)throw new Error(o.statusText);const r=o.status,i=await o.json();return{status:r,data:i}})},H=async(e,t,s)=>await fetch(`${u}/api${e}`,{method:l.POST,headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(s)}).then(async a=>{if(a.status!==200)throw new Error(a.statusText);const o=a.status,r=await a.json();return{status:o,id:r.id}}),K=async(e,t,s)=>await fetch(`${u}/api${e}`,{method:l.PATCH,headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(s)}).then(async a=>{if(a.status!==200)throw new Error(a.statusText);return{status:a.status}}),X=async(e,t)=>await fetch(`${u}/api${e}`,{method:l.DELETE,headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}).then(async n=>{if(n.status!==200)throw new Error(n.statusText);return{status:n.status}});export{F as L,q as a,J as b,W as c,V as d,K as e,H as f,k as g,X as h,$ as r,N as s};
